"use strict";angular.module("scannabis",["ngAnimate","ngAria","ngResource","ngTouch","ui.router","firebase"]),angular.module("scannabis").directive("auth",function(){return{templateUrl:"scripts/auth/auth-d.html",restrict:"EA"}});var fb=Firebase,fbRef="https://scannabis.firebaseio.com/";angular.module("scannabis").factory("Data",["$firebaseObject","$firebaseArray","$firebaseAuth",function(e,a,t){var n={methods:{},data:{}};return n.methods={getData:function(){var e=new fb(fbRef),s=t(e),r=s.$getAuth();r?a(e).$loaded().then(function(e){n.data.users=e.$getRecord("users"),console.log("Logged in as:",r.uid)}):console.log("Logged out")},login:function(e){var a=new fb(fbRef),s=t(a);s.$authWithPassword({email:e.email,password:e.pass}).then(function(e){n.methods.getData()})["catch"](function(e){console.error("Authentication failed:",e)})},register:function(a){var s=new fb(fbRef),r=t(s);r.$createUser({email:a.email,password:a.pass}).then(function(e){return console.log("User "+e.uid+" created successfully!"),r.$authWithPassword({email:a.email,password:a.pass})}).then(function(t){var r=s.child("users");e(r).$loaded().then(function(e){a.pass=null,e[t.uid]=a,e.$save()});n.methods.getData()})["catch"](function(e){console.error("Error: ",e)})},logout:function(){var e=new fb(fbRef),a=t(e);a.$unauth(),n.data.users={}},save:function(a,t,n){var s=fbRef+a+"/"+t;console.log(s);var r=new fb(s),o=e(r);console.log(o),o.$value=n,o.$save()}},n.methods.getData(),n}]),angular.module("scannabis").config(["$stateProvider","$urlRouterProvider",function(e,a){e.state("scannabis",{url:"/",template:"<scannabis></scannabis>"}),a.otherwise("/")}]),angular.module("scannabis").directive("scannabis",["Data",function(e){return{templateUrl:"scripts/scannabis/scannabis-d.html",restrict:"EA",scope:{},link:function(e,a,t){},controller:["$scope",function(a){a.data=e}]}}]),angular.module("scannabis").directive("users",function(){return{templateUrl:"scripts/users/users-d.html",restrict:"EA"}});