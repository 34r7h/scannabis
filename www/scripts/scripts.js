"use strict";angular.module("scannabis",["ngAnimate","ngAria","ngResource","ngTouch","ui.router","firebase"]),angular.module("scannabis").directive("auth",function(){return{templateUrl:"scripts/auth/auth-d.html",restrict:"EA"}}),angular.module("scannabis").directive("coin",function(){return{templateUrl:"scripts/coin/coin-d.html",restrict:"EA",scope:{},link:function(e,t,a){},controller:["$scope",function(e){}]}}),angular.module("scannabis").directive("delivery",function(){return{templateUrl:"scripts/delivery/delivery-d.html",restrict:"EA"}}),angular.module("scannabis").directive("dna",function(){return{templateUrl:"scripts/dna/dna-d.html",restrict:"EA"}});var fb=Firebase,fbRef="https://scannabis.firebaseio.com/";angular.module("scannabis").factory("Data",["$firebaseObject","$firebaseArray","$firebaseAuth",function(e,t,a){var n={methods:{},data:{},auth:{}};return n.methods={getData:function(){var e=new fb(fbRef),r=a(e),s=r.$getAuth();s?t(e).$loaded().then(function(e){n.data.users=e.$getRecord("users"),n.auth=s}):console.log("Logged out")},login:function(e){var t=new fb(fbRef),r=a(t);r.$authWithPassword({email:e.email,password:e.pass}).then(function(e){n.methods.getData()})["catch"](function(e){console.error("Authentication failed:",e)})},register:function(t){var r=new fb(fbRef),s=a(r);s.$createUser({email:t.email,password:t.pass}).then(function(e){return console.log("User "+e.uid+" created successfully!"),s.$authWithPassword({email:t.email,password:t.pass})}).then(function(a){var s=r.child("users");e(s).$loaded().then(function(e){t.pass=null,e[a.uid]=t,e.$save()});n.methods.getData()})["catch"](function(e){console.error("Error: ",e)})},logout:function(){var e=new fb(fbRef),t=a(e);t.$unauth(),n.data.users={}},save:function(t,a,n){var r=fbRef+t+"/"+a,s=new fb(r),i=e(s);i.$value=n,i.$save()},add:function(e,a,r){if(n.methods.getData(),null!==r)var s=fbRef+"users/"+n.auth.uid+"/public/"+e;else var s=fbRef+"users/"+r+"/public/"+e;var s=fbRef+"users/"+n.auth.uid+"/public/"+e,i=new fb(s),u=t(i);u.$add(a).then(function(){n.methods.getData()})}},n.methods.getData(),n}]),angular.module("scannabis").directive("products",function(){return{templateUrl:"scripts/products/products-d.html",restrict:"EA"}}),angular.module("scannabis").directive("reviews",function(){return{templateUrl:"scripts/reviews/reviews-d.html",restrict:"EA"}}),angular.module("scannabis").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("scannabis",{url:"/",template:"<scannabis></scannabis>"}),t.otherwise("/")}]),angular.module("scannabis").directive("scannabis",["Data",function(e){return{templateUrl:"scripts/scannabis/scannabis-d.html",restrict:"EA",scope:{},link:function(e,t,a){},controller:["$scope",function(t){t.data=e}]}}]),angular.module("scannabis").directive("shop",function(){return{templateUrl:"scripts/shop/shop-d.html",restrict:"EA"}}),angular.module("scannabis").directive("users",function(){return{templateUrl:"scripts/users/users-d.html",restrict:"EA"}});